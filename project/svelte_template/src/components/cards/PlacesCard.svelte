<script>
    export let card;
    export let isCompact = true;
    export let recommendation = "ì´ ì§€ì—­"; // ì™¸ë¶€ì—ì„œ ì „ë‹¬ë°›ìŒ

    const placeCount = card.around?.length || 0;
    
    // ë°±ë¡ì´ ë©”ì‹œì§€ ë°”ë¦¬ì—ì´ì…˜
    const placeMessages = [
        `<span class="font-bold">${recommendation}</span> ì£¼ë³€ì˜ ê°€ë³¼ ë§Œí•œ ê³³ <span class="font-bold">${placeCount}ê³³</span>ì„ ì°¾ì•˜ì–´ìš”! ğŸŒ`,
        `ì´ ê·¼ì²˜ì— <span class="font-bold">${placeCount}ê³³</span>ì˜ ë©‹ì§„ ì¥ì†Œê°€ ìˆë„¤ìš”! í•¨ê»˜ ë‘˜ëŸ¬ë³´ì„¸ìš” âœ¨`,
        `<span class="font-bold">${recommendation}</span> ê·¼ì²˜ ìˆ¨ì€ ë³´ì„ë“¤ì„ ë°œê²¬í–ˆì–´ìš”! ğŸ’`,
        `ì´ì™”ìœ¼ë©´ ê»˜ ë“¤ëŸ¬ë³´ì„¸ìš”! <span class="font-bold">${placeCount}ê³³</span>ì˜ íŠ¹ë³„í•œ ì¥ì†Œê°€ ìˆì–´ìš” ğŸ’š`,
        `ì£¼ë³€ ëª…ì†Œ <span class="font-bold">${placeCount}ê³³</span>ì„ ì°¾ì•˜ì–´ìš”! í•œ ê³³ì”© ë‘˜ëŸ¬ë³´ëŠ” ì¬ë¯¸ê°€ ìˆì„ ê±°ì˜ˆìš” ğŸ—ºï¸`
    ];
    
    const randomMessage = placeMessages[Math.floor(Math.random() * placeMessages.length)];
</script>

<!-- ë°±ë¡ì´ ëŒ€í™” -->
<div class="flex items-start gap-3 mb-4 bg-indigo-50 rounded-2xl p-4">
    <img
        src="/images/mascot.png"
        alt="ë°±ë¡ì´"
        class="w-10 h-10 flex-shrink-0 object-contain"
    />
    <div class="flex-1">
        <div class="text-sm text-indigo-900 leading-relaxed">
            {@html randomMessage}
        </div>
    </div>
</div>

<h3 class="text-2xl font-bold text-gray-900 mb-3">ì£¼ë³€ ëª…ì†Œ</h3>

<div class="flex-1">
    {#if card.around && card.around.length > 0}
        {#if isCompact}
            <div class="space-y-2">
                {#each card.around.slice(0, 3) as place}
                    <div class="bg-gray-50 rounded-lg p-3 border border-gray-200">
                        <div class="font-semibold text-gray-900 text-sm">
                            {place.name}
                        </div>
                        <div class="text-xs text-gray-600">{place.reason}</div>
                    </div>
                {/each}
            </div>
        {:else}
            <div class="space-y-3">
                {#each card.around as place}
                    <div
                        class="bg-gray-50 rounded-xl p-5 border border-gray-200 hover:bg-gray-100 transition"
                    >
                        <div class="font-bold text-gray-900 text-xl">
                            {place.name}
                        </div>
                        <div class="text-base text-gray-700 mt-2">{place.reason}</div>
                    </div>
                {/each}
            </div>
        {/if}
    {:else}
        <p class="text-gray-500">ì£¼ë³€ ëª…ì†Œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
    {/if}
</div>